<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Sarabun', 'Segoe UI', sans-serif; background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); min-height: 100vh; padding: 8px; }
    .container { max-width: 600px; margin: 0 auto; }
    h1 { text-align: center; color: #2e7d32; font-size: 1.3em; margin-bottom: 2px; }
    .subtitle { text-align: center; color: #43a047; font-size: 0.7em; margin-bottom: 10px; }
    .tabs { display: flex; gap: 4px; margin-bottom: 10px; overflow-x: auto; padding-bottom: 4px; }
    .tab { padding: 8px 12px; background: white; border: none; border-radius: 20px; cursor: pointer; font-size: 0.75em; white-space: nowrap; transition: all 0.3s; color: #2e7d32; font-weight: 600; }
    .tab:hover, .tab.active { background: #4caf50; color: white; box-shadow: 0 2px 8px rgba(76,175,80,0.3); }
    .card { background: white; border-radius: 16px; padding: 14px; margin-bottom: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .card h2 { color: #2e7d32; font-size: 1em; margin-bottom: 10px; display: flex; align-items: center; gap: 6px; }
    .card h3 { color: #388e3c; font-size: 0.9em; margin: 10px 0 6px; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .form-group { margin-bottom: 10px; }
    .form-group label { display: block; font-size: 0.75em; color: #555; margin-bottom: 4px; font-weight: 600; }
    select, input[type="date"], input[type="number"], input[type="text"], textarea { width: 100%; padding: 10px; border: 2px solid #c8e6c9; border-radius: 10px; font-size: 0.85em; outline: none; transition: border 0.3s; }
    select:focus, input:focus, textarea:focus { border-color: #4caf50; }
    .btn { background: linear-gradient(135deg, #66bb6a, #43a047); color: white; border: none; padding: 12px; border-radius: 12px; font-size: 0.85em; font-weight: bold; cursor: pointer; width: 100%; transition: all 0.3s; }
    .btn:hover { box-shadow: 0 4px 15px rgba(76,175,80,0.4); transform: translateY(-1px); }
    .btn-sm { padding: 8px 12px; font-size: 0.75em; width: auto; }
    .hidden { display: none !important; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    
    /* Status Card */
    .status-card { background: linear-gradient(135deg, #ffd54f, #ff9800); border-radius: 16px; padding: 14px; color: white; margin-bottom: 10px; }
    .status-card h2 { color: white; margin-bottom: 4px; }
    .status-card p { font-size: 0.8em; opacity: 0.9; }
    .status-badges { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
    .status-badge { background: rgba(255,255,255,0.25); padding: 4px 10px; border-radius: 12px; font-size: 0.7em; }
    
    /* Phase Card */
    .phase-card { border-left: 4px solid #4caf50; }
    .phase-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .phase-title { font-weight: bold; color: #2e7d32; font-size: 0.95em; }
    .phase-badge { background: #4caf50; color: white; padding: 3px 10px; border-radius: 12px; font-size: 0.65em; animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    .phase-desc { color: #666; font-size: 0.8em; margin-bottom: 10px; }
    
    /* Bio Tags */
    .bio-tags { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 10px; }
    .bio-tag { padding: 4px 10px; border-radius: 12px; font-size: 0.7em; cursor: pointer; border: 1px solid; transition: all 0.2s; }
    .bio-tag:hover { transform: scale(1.05); }
    .bio-em { background: #fff3e0; color: #e65100; border-color: #ffcc80; }
    .bio-tricho { background: #e8f5e9; color: #2e7d32; border-color: #a5d6a7; }
    .bio-beau { background: #fce4ec; color: #c2185b; border-color: #f8bbd9; }
    .bio-meta { background: #e3f2fd; color: #1565c0; border-color: #90caf9; }
    .bio-hormone { background: #f3e5f5; color: #7b1fa2; border-color: #ce93d8; }
    
    /* Bio Detail */
    .bio-detail { padding: 10px; border-radius: 10px; margin-bottom: 10px; font-size: 0.75em; }
    .bio-detail h4 { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .bio-detail .close { cursor: pointer; color: #999; }
    
    /* Checklist */
    .checklist { list-style: none; }
    .checklist li { display: flex; align-items: flex-start; gap: 10px; padding: 8px 10px; margin-bottom: 4px; background: #f5f5f5; border-radius: 10px; cursor: pointer; transition: all 0.2s; font-size: 0.8em; }
    .checklist li:hover { background: #e8f5e9; }
    .checklist li.done { background: #c8e6c9; }
    .checklist li.done span { text-decoration: line-through; color: #888; }
    .checklist input[type="checkbox"] { width: 18px; height: 18px; margin-top: 2px; accent-color: #4caf50; flex-shrink: 0; }
    
    /* Progress Bar */
    .progress-wrap { background: #e0e0e0; border-radius: 10px; height: 8px; margin-top: 8px; overflow: hidden; }
    .progress-bar { height: 100%; background: linear-gradient(90deg, #81c784, #4caf50); transition: width 0.5s; }
    .progress-text { display: flex; justify-content: space-between; font-size: 0.7em; color: #666; margin-top: 4px; }
    
    /* Quick Log Buttons */
    .quick-btns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }
    .quick-btn { padding: 12px 6px; border: none; border-radius: 12px; cursor: pointer; background: #f0f0f0; transition: all 0.2s; display: flex; flex-direction: column; align-items: center; gap: 4px; }
    .quick-btn:hover { background: #e0e0e0; }
    .quick-btn.done { background: #4caf50; color: white; }
    .quick-btn .icon { font-size: 1.3em; }
    .quick-btn .label { font-size: 0.65em; font-weight: 600; }
    .quick-btn .time { font-size: 0.55em; opacity: 0.8; }
    
    /* Next Phase */
    .next-phase { background: #e3f2fd; border-left: 4px solid #2196f3; }
    .next-phase h3 { color: #1565c0; }
    
    /* Tips */
    .tips { background: #fffde7; border-radius: 12px; padding: 12px; }
    .tips h3 { color: #f9a825; margin-bottom: 8px; font-size: 0.85em; }
    .tips ul { list-style: none; font-size: 0.75em; }
    .tips li { display: flex; align-items: flex-start; gap: 6px; margin-bottom: 6px; color: #555; }
    
    /* Stats Grid */
    .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; text-align: center; }
    .stat-box { background: #f5f5f5; padding: 10px 6px; border-radius: 12px; }
    .stat-box.green { background: #e8f5e9; }
    .stat-box.blue { background: #e3f2fd; }
    .stat-box.purple { background: #f3e5f5; }
    .stat-box.orange { background: #fff3e0; }
    .stat-value { font-size: 1.4em; font-weight: bold; color: #333; }
    .stat-label { font-size: 0.55em; color: #888; }
    
    /* Timeline */
    .timeline-item { display: flex; gap: 10px; margin-bottom: 8px; }
    .timeline-dot { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.7em; font-weight: bold; flex-shrink: 0; }
    .timeline-dot.done { background: #4caf50; color: white; }
    .timeline-dot.current { background: #ffd54f; color: #333; box-shadow: 0 0 0 4px rgba(255,213,79,0.3); }
    .timeline-dot.future { background: #e0e0e0; color: #999; }
    .timeline-content { flex: 1; padding: 10px; border-radius: 10px; font-size: 0.8em; }
    .timeline-content.done { background: #e8f5e9; }
    .timeline-content.current { background: #fffde7; border: 2px solid #ffd54f; }
    .timeline-content.future { background: #f5f5f5; }
    .timeline-title { font-weight: 600; color: #333; }
    .timeline-date { font-size: 0.85em; color: #888; }
    .timeline-percent { float: right; padding: 2px 8px; border-radius: 10px; font-size: 0.8em; }
    .timeline-percent.complete { background: #4caf50; color: white; }
    .timeline-percent.partial { background: #ffe082; color: #333; }
    
    /* Growth Log */
    .growth-item { background: #f5f5f5; padding: 10px; border-radius: 10px; margin-bottom: 6px; }
    .growth-header { display: flex; justify-content: space-between; margin-bottom: 4px; }
    .growth-day { font-weight: bold; color: #2e7d32; font-size: 0.85em; }
    .growth-date { font-size: 0.65em; color: #999; }
    .growth-tags { display: flex; flex-wrap: wrap; gap: 4px; }
    .growth-tag { padding: 3px 8px; border-radius: 8px; font-size: 0.7em; }
    .growth-tag.height { background: #e3f2fd; color: #1565c0; }
    .growth-tag.leaves { background: #e8f5e9; color: #2e7d32; }
    .growth-tag.problem { background: #ffebee; color: #c62828; }
    
    /* Bio Accordion */
    .bio-accordion { border: 2px solid; border-radius: 12px; margin-bottom: 8px; overflow: hidden; }
    .bio-accordion-header { padding: 12px; display: flex; align-items: center; justify-content: space-between; cursor: pointer; }
    .bio-accordion-header .info { display: flex; align-items: center; gap: 8px; }
    .bio-accordion-header .icon { font-size: 1.5em; }
    .bio-accordion-header .name { font-weight: bold; font-size: 0.9em; }
    .bio-accordion-header .fullname { font-size: 0.65em; opacity: 0.7; }
    .bio-accordion-header .arrow { font-size: 1em; transition: transform 0.3s; }
    .bio-accordion.open .arrow { transform: rotate(180deg); }
    .bio-accordion-body { padding: 0 12px 12px; display: none; }
    .bio-accordion.open .bio-accordion-body { display: block; }
    .bio-info-box { background: rgba(255,255,255,0.5); padding: 8px; border-radius: 8px; margin-bottom: 6px; font-size: 0.75em; }
    .bio-info-box b { display: block; margin-bottom: 2px; }
    .bio-info-box ul { margin: 0; padding-left: 16px; }
    
    /* Warning Box */
    .warning-box { background: #ffebee; border: 2px solid #ef9a9a; border-radius: 12px; padding: 12px; }
    .warning-box h3 { color: #c62828; font-size: 0.85em; margin-bottom: 8px; }
    .warning-box ul { list-style: none; font-size: 0.75em; }
    .warning-box li { display: flex; align-items: flex-start; gap: 6px; margin-bottom: 6px; }
    
    /* Schedule Table */
    .schedule-table { background: #e8f5e9; border-radius: 12px; padding: 12px; }
    .schedule-table h3 { color: #2e7d32; font-size: 0.85em; margin-bottom: 8px; }
    .schedule-row { display: flex; justify-content: space-between; padding: 8px; background: white; border-radius: 8px; margin-bottom: 4px; font-size: 0.75em; }
    .schedule-row .time { color: #666; }
    .schedule-row .action { font-weight: 600; color: #2e7d32; }
    .schedule-row .action.red { color: #c62828; }
    
    /* Veggie Info */
    .veggie-info { display: flex; gap: 10px; align-items: flex-start; }
    .veggie-icon { font-size: 2.5em; }
    .veggie-details { flex: 1; }
    .veggie-name { font-weight: bold; color: #2e7d32; font-size: 1em; }
    .veggie-desc { font-size: 0.75em; color: #666; margin: 4px 0; }
    .veggie-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-top: 8px; }
    .veggie-stat { background: #f5f5f5; padding: 6px 8px; border-radius: 8px; font-size: 0.7em; }
    .veggie-tip { font-size: 0.75em; color: #43a047; margin-top: 8px; }
    
    /* Plan Summary */
    .plan-summary { background: linear-gradient(135deg, #4caf50, #2e7d32); border-radius: 16px; padding: 14px; color: white; }
    .plan-summary .header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
    .plan-summary .icon { font-size: 2.5em; }
    .plan-summary .title { font-size: 1.1em; font-weight: bold; }
    .plan-summary .dates { font-size: 0.75em; opacity: 0.9; }
    .plan-progress { background: rgba(255,255,255,0.2); border-radius: 10px; padding: 8px; }
    .plan-progress .bar { height: 10px; background: rgba(255,255,255,0.3); border-radius: 5px; overflow: hidden; }
    .plan-progress .fill { height: 100%; background: white; transition: width 0.5s; }
    .plan-progress .text { display: flex; justify-content: space-between; font-size: 0.7em; margin-top: 4px; }
    
    /* Empty State */
    .empty-state { text-align: center; padding: 40px 20px; }
    .empty-state .icon { font-size: 3em; margin-bottom: 10px; }
    .empty-state p { color: #888; margin-bottom: 10px; }
    
    /* Activity Log */
    .activity-day { background: #f5f5f5; padding: 8px; border-radius: 8px; margin-bottom: 6px; }
    .activity-day .date { font-size: 0.75em; font-weight: 600; color: #555; margin-bottom: 4px; }
    .activity-tags { display: flex; flex-wrap: wrap; gap: 4px; }
    .activity-tag { padding: 2px 6px; border-radius: 6px; font-size: 0.6em; }
    
    .footer { text-align: center; font-size: 0.6em; color: #4caf50; padding: 10px 0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üå± ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå</h1>
    <p class="subtitle">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡πâ‡∏≠‡∏¢ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏õ‡∏•‡∏≠‡∏î‡∏™‡∏≤‡∏£‡∏û‡∏¥‡∏©</p>
    
    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" onclick="showTab('planner')">üìã ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô</button>
      <button class="tab" onclick="showTab('today')">üìÖ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
      <button class="tab" onclick="showTab('progress')">üìä ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</button>
      <button class="tab" onclick="showTab('record')">üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      <button class="tab" onclick="showTab('guide')">üìñ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠</button>
    </div>
    
    <!-- TAB: PLANNER -->
    <div id="planner" class="tab-content active">
      <div class="card">
        <h2>üå± ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å</h2>
        <div class="form-row">
          <div class="form-group">
            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏±‡∏Å</label>
            <select id="category" onchange="updateVeggieOptions()">
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...</option>
              <option value="salad">ü•ó ‡∏ú‡∏±‡∏Å‡∏™‡∏•‡∏±‡∏î</option>
              <option value="thai">üåø ‡∏ú‡∏±‡∏Å‡πÑ‡∏ó‡∏¢</option>
            </select>
          </div>
          <div class="form-group">
            <label>‡∏ä‡∏ô‡∏¥‡∏î‡∏ú‡∏±‡∏Å</label>
            <select id="veggieType" onchange="showVeggieInfo()">
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label>üìÖ ‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å</label>
          <input type="date" id="startDate">
        </div>
        <button class="btn" onclick="generatePlan()">üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å!</button>
      </div>
      
      <div id="veggieInfoCard" class="card hidden">
        <div class="veggie-info">
          <div class="veggie-icon" id="vInfoIcon"></div>
          <div class="veggie-details">
            <div class="veggie-name" id="vInfoName"></div>
            <div class="veggie-desc" id="vInfoDesc"></div>
            <div class="veggie-grid" id="vInfoGrid"></div>
            <div class="veggie-tip" id="vInfoTip"></div>
          </div>
        </div>
      </div>
      
      <div id="planSummaryCard" class="plan-summary hidden">
        <div class="header">
          <div class="icon" id="planIcon"></div>
          <div>
            <div class="title" id="planTitle"></div>
            <div class="dates" id="planDates"></div>
          </div>
        </div>
        <div class="plan-progress">
          <div class="bar"><div class="fill" id="planProgressBar"></div></div>
          <div class="text"><span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span><span id="planProgressText">0%</span></div>
        </div>
      </div>
    </div>
    
    <!-- TAB: TODAY -->
    <div id="today" class="tab-content">
      <div id="todayContent"></div>
    </div>
    
    <!-- TAB: PROGRESS -->
    <div id="progress" class="tab-content">
      <div id="progressContent"></div>
    </div>
    
    <!-- TAB: RECORD -->
    <div id="record" class="tab-content">
      <div id="recordContent"></div>
    </div>
    
    <!-- TAB: GUIDE -->
    <div id="guide" class="tab-content">
      <div class="card">
        <h2>üìñ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏™‡∏≤‡∏£‡∏ä‡∏µ‡∏ß‡∏†‡∏±‡∏ì‡∏ë‡πå</h2>
        <div id="bioGuideContent"></div>
      </div>
      
      <div class="warning-box">
        <h3>‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á</h3>
        <ul>
          <li><span>‚ùå</span> ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡∏ä‡∏µ‡∏ß‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÅ‡∏°‡∏•‡∏á‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏£‡∏≤</li>
          <li><span>‚ùå</span> ‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤ + ‡∏ö‡∏¥‡∏ß‡πÄ‡∏ß‡∏≠‡πÄ‡∏£‡∏µ‡∏¢ ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ú‡∏™‡∏°‡∏â‡∏µ‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô</li>
          <li><span>‚úÖ</span> ‡∏ö‡∏¥‡∏ß‡πÄ‡∏ß‡∏≠‡πÄ‡∏£‡∏µ‡∏¢ + ‡πÄ‡∏°‡∏ï‡∏≤‡πÑ‡∏£‡πÄ‡∏ã‡∏µ‡∏¢‡∏° ‡∏ú‡∏™‡∏°‡πÉ‡∏ä‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ</li>
          <li><span>üåÖ</span> ‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ä‡πâ‡∏≤‡∏ï‡∏£‡∏π‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡πÄ‡∏ä‡∏∑‡πâ‡∏≠)</li>
          <li><span>‚ùÑÔ∏è</span> ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏≤‡∏£‡∏ä‡∏µ‡∏ß‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏¢‡πá‡∏ô ‡∏≠‡∏≤‡∏¢‡∏∏ 3-6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</li>
          <li><span>‚è∏Ô∏è</span> ‡∏´‡∏¢‡∏∏‡∏î‡∏â‡∏µ‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß 3-5 ‡∏ß‡∏±‡∏ô</li>
        </ul>
      </div>
      
      <div class="schedule-table">
        <h3>üìã ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏£‡∏ä‡∏µ‡∏ß‡∏†‡∏±‡∏ì‡∏ë‡πå</h3>
        <div class="schedule-row"><span class="time">‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏•‡∏π‡∏Å 7 ‡∏ß‡∏±‡∏ô</span><span class="action">EM + ‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤</span></div>
        <div class="schedule-row"><span class="time">‡∏ß‡∏±‡∏ô‡∏õ‡∏•‡∏π‡∏Å</span><span class="action">‡∏Ñ‡∏•‡∏∏‡∏Å‡πÄ‡∏°‡∏•‡πá‡∏î‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤</span></div>
        <div class="schedule-row"><span class="time">‡∏ó‡∏∏‡∏Å 5-7 ‡∏ß‡∏±‡∏ô</span><span class="action">EM + ‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤</span></div>
        <div class="schedule-row"><span class="time">‡∏ó‡∏∏‡∏Å 7-10 ‡∏ß‡∏±‡∏ô</span><span class="action">‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏û‡∏∑‡∏ä</span></div>
        <div class="schedule-row"><span class="time">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡πÅ‡∏°‡∏•‡∏á</span><span class="action">‡∏ö‡∏¥‡∏ß‡πÄ‡∏ß‡∏≠‡πÄ‡∏£‡∏µ‡∏¢ / ‡πÄ‡∏°‡∏ï‡∏≤‡πÑ‡∏£‡πÄ‡∏ã‡∏µ‡∏¢‡∏°</span></div>
        <div class="schedule-row"><span class="time">‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö 3-5 ‡∏ß‡∏±‡∏ô</span><span class="action red">‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á</span></div>
      </div>
    </div>
    
    <p class="footer">üåø ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå ‡∏õ‡∏•‡∏≠‡∏î‡∏™‡∏≤‡∏£‡∏û‡∏¥‡∏© ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ üåø</p>
  </div>

<script>
// ===== DATA =====
const saladVeggies = {
  greenoak: { name: '‡∏Å‡∏£‡∏µ‡∏ô‡πÇ‡∏≠‡πä‡∏Ñ', icon: 'ü•¨', days: 45, germDays: 3, desc: '‡πÉ‡∏ö‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô ‡∏£‡∏™‡∏Å‡∏£‡∏≠‡∏ö‡∏≠‡∏£‡πà‡∏≠‡∏¢', tips: '‡∏ä‡∏≠‡∏ö‡πÅ‡∏î‡∏î‡∏£‡∏≥‡πÑ‡∏£ ‡∏£‡∏î‡∏ô‡πâ‡∏≥‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏£‡∏≥‡πÑ‡∏£ 4-6 ‡∏ä‡∏°.' },
  redoak: { name: '‡πÄ‡∏£‡∏î‡πÇ‡∏≠‡πä‡∏Ñ', icon: 'ü•ó', days: 45, germDays: 3, desc: '‡πÉ‡∏ö‡∏™‡∏µ‡πÅ‡∏î‡∏á‡πÄ‡∏Ç‡πâ‡∏° ‡∏≠‡∏∏‡∏î‡∏°‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô', tips: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏™‡∏ß‡∏¢', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î 5-6 ‡∏ä‡∏°.' },
  butterhead: { name: '‡∏ö‡∏±‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏Æ‡∏î', icon: 'ü•¨', days: 50, germDays: 4, desc: '‡πÉ‡∏ö‡∏ô‡∏∏‡πà‡∏° ‡∏£‡∏™‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏±‡∏ô', tips: '‡∏ä‡∏≠‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏¢‡πá‡∏ô ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏ô‡πâ‡∏≥‡∏Ç‡∏±‡∏á', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏≠‡πà‡∏≠‡∏ô 4-5 ‡∏ä‡∏°.' },
  cos: { name: '‡∏Å‡∏£‡∏µ‡∏ô‡∏Ñ‡∏≠‡∏™', icon: 'ü•ó', days: 55, germDays: 4, desc: '‡πÉ‡∏ö‡∏¢‡∏≤‡∏ß‡∏Å‡∏£‡∏≠‡∏ö ‡∏ó‡∏≥‡∏ã‡∏µ‡∏ã‡∏≤‡∏£‡πå‡∏™‡∏•‡∏±‡∏î', tips: '‡∏ó‡∏ô‡πÅ‡∏î‡∏î‡πÑ‡∏î‡πâ‡∏î‡∏µ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡πâ‡∏≥‡∏°‡∏≤‡∏Å', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2-3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î 5-7 ‡∏ä‡∏°.' },
  filley: { name: '‡∏ü‡∏¥‡∏•‡πÄ‡∏•‡∏¢‡πå', icon: 'üåø', days: 40, germDays: 3, desc: '‡πÉ‡∏ö‡∏´‡∏¢‡∏±‡∏Å ‡πÇ‡∏ï‡πÄ‡∏£‡πá‡∏ß ‡∏õ‡∏•‡∏π‡∏Å‡∏á‡πà‡∏≤‡∏¢', tips: '‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏£‡∏≥‡πÑ‡∏£ 4-5 ‡∏ä‡∏°.' }
};

const thaiVeggies = {
  kana: { name: '‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤', icon: 'ü•¨', days: 50, germDays: 4, desc: '‡∏ú‡∏±‡∏Å‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° ‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô‡∏™‡∏π‡∏á', tips: '‡∏õ‡∏•‡∏π‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏õ‡∏µ ‡∏ä‡∏≠‡∏ö‡∏î‡∏¥‡∏ô‡∏£‡πà‡∏ß‡∏ô', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î 5-6 ‡∏ä‡∏°.' },
  pakbung: { name: '‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á‡∏à‡∏µ‡∏ô', icon: 'üåø', days: 25, germDays: 3, desc: '‡πÇ‡∏ï‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å ‡∏õ‡∏•‡∏π‡∏Å‡∏á‡πà‡∏≤‡∏¢', tips: '‡πÅ‡∏ä‡πà‡πÄ‡∏°‡∏•‡πá‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏•‡∏π‡∏Å 12 ‡∏ä‡∏°.', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2-3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î 5-6 ‡∏ä‡∏°.' },
  pakchoi: { name: '‡∏ú‡∏±‡∏Å‡∏Å‡∏ß‡∏≤‡∏á‡∏ï‡∏∏‡πâ‡∏á', icon: 'ü•¨', days: 35, germDays: 3, desc: '‡∏ú‡∏±‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô ‡πÇ‡∏ï‡πÑ‡∏ß', tips: '‡∏ä‡∏≠‡∏ö‡πÅ‡∏î‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡πâ‡∏≥‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î 5-6 ‡∏ä‡∏°.' },
  kaprao: { name: '‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤', icon: 'üåø', days: 35, germDays: 5, desc: '‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á 7-8 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', tips: '‡∏ï‡∏±‡∏î‡∏¢‡∏≠‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡∏Å‡∏Å‡∏¥‡πà‡∏á', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 1-2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î 6-8 ‡∏ä‡∏°.' },
  horapha: { name: '‡πÇ‡∏´‡∏£‡∏∞‡∏û‡∏≤', icon: 'üåø', days: 40, germDays: 5, desc: '‡∏´‡∏≠‡∏° ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£', tips: '‡∏ä‡∏≠‡∏ö‡πÅ‡∏î‡∏î‡πÅ‡∏•‡∏∞‡∏î‡∏¥‡∏ô‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏î‡∏µ', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 1-2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î 6-8 ‡∏ä‡∏°.' },
  pakchi: { name: '‡∏ú‡∏±‡∏Å‡∏ä‡∏µ', icon: 'üå±', days: 45, germDays: 7, desc: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°', tips: '‡∏ö‡∏î‡πÄ‡∏°‡∏•‡πá‡∏î‡πÄ‡∏ö‡∏≤‡πÜ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏≤‡∏∞', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏£‡∏≥‡πÑ‡∏£ 3-4 ‡∏ä‡∏°.' },
  tonhom: { name: '‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°', icon: 'üå±', days: 35, germDays: 5, desc: '‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏¢ ‡πÇ‡∏ï‡πÄ‡∏£‡πá‡∏ß', tips: '‡∏õ‡∏•‡∏π‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°‡πÑ‡∏î‡πâ', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 1-2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏£‡∏≥‡πÑ‡∏£ 4-5 ‡∏ä‡∏°.' },
  phak: { name: '‡∏ú‡∏±‡∏Å‡∏õ‡∏•‡∏±‡∏á', icon: 'üåø', days: 30, germDays: 4, desc: '‡πÉ‡∏ö‡∏•‡∏∑‡πà‡∏ô ‡∏ï‡πâ‡∏°‡∏à‡∏∑‡∏î‡∏≠‡∏£‡πà‡∏≠‡∏¢', tips: '‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô ‡πÇ‡∏ï‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡∏ô', water: '‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 2-3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', light: '‡πÅ‡∏î‡∏î‡∏£‡∏≥‡πÑ‡∏£ 4-5 ‡∏ä‡∏°.' }
};

const bioProducts = {
  em: { name: 'EM ‡∏à‡∏∏‡∏•‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå', icon: 'ü¶†', color: 'em', fullName: 'Effective Microorganisms', ratio: '1 ‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞ : ‡∏ô‡πâ‡∏≥ 10 ‡∏•‡∏¥‡∏ï‡∏£', when: '‡∏ó‡∏∏‡∏Å 5-7 ‡∏ß‡∏±‡∏ô ‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å', how: '‡∏ú‡∏™‡∏°‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏î‡∏£‡∏≤‡∏î‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡πÉ‡∏ö', benefits: ['‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏£‡πà‡∏ß‡∏ô‡∏ã‡∏∏‡∏¢', '‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏•‡∏≤‡∏¢‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏', '‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏∑‡∏ä‡∏î‡∏π‡∏î‡∏ã‡∏∂‡∏°‡∏ò‡∏≤‡∏ï‡∏∏‡∏≠‡∏≤‡∏´‡∏≤‡∏£', '‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ô‡∏î‡∏¥‡∏ô'], tips: '‡∏£‡∏≤‡∏î‡∏î‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏•‡∏π‡∏Å 7 ‡∏ß‡∏±‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏î‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°', storage: '‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥ 25-45¬∞C ‡πÑ‡∏î‡πâ 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' },
  tricho: { name: '‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤', icon: 'üçÑ', color: 'tricho', fullName: 'Trichoderma', ratio: '25 ‡∏Å‡∏£‡∏±‡∏° : ‡∏ô‡πâ‡∏≥ 20 ‡∏•‡∏¥‡∏ï‡∏£', when: '‡∏ó‡∏∏‡∏Å 5-7 ‡∏ß‡∏±‡∏ô ‡∏â‡∏µ‡∏î‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô', how: '‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö ‡∏Å‡∏¥‡πà‡∏á ‡∏•‡∏≥‡∏ï‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏î‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô', benefits: ['‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏£‡∏≤‡∏Å‡πÄ‡∏ô‡πà‡∏≤-‡πÇ‡∏Ñ‡∏ô‡πÄ‡∏ô‡πà‡∏≤', '‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡πÄ‡∏ô‡πà‡∏≤‡∏Ñ‡∏≠‡∏î‡∏¥‡∏ô', '‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡πÉ‡∏ö‡πÑ‡∏´‡∏°‡πâ‡πÉ‡∏ö‡∏à‡∏∏‡∏î', '‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô‡∏û‡∏∑‡∏ä'], tips: '‡∏Ñ‡∏•‡∏∏‡∏Å‡πÄ‡∏°‡∏•‡πá‡∏î 10 ‡∏Å‡∏£‡∏±‡∏°:‡πÄ‡∏°‡∏•‡πá‡∏î 1 ‡∏Å‡∏Å. ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏•‡∏π‡∏Å', storage: '‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô‡πÑ‡∏î‡πâ 1 ‡∏õ‡∏µ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏´‡πâ‡∏≠‡∏á 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' },
  beauveria: { name: '‡∏ö‡∏¥‡∏ß‡πÄ‡∏ß‡∏≠‡πÄ‡∏£‡∏µ‡∏¢', icon: 'ü¶ü', color: 'beau', fullName: 'Beauveria bassiana', ratio: '50 ‡∏Å‡∏£‡∏±‡∏° : ‡∏ô‡πâ‡∏≥ 20 ‡∏•‡∏¥‡∏ï‡∏£', when: '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡πÅ‡∏°‡∏•‡∏á ‡∏â‡∏µ‡∏î‡∏ó‡∏∏‡∏Å 5-7 ‡∏ß‡∏±‡∏ô ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô', how: '‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏ó‡∏µ‡πà‡πÅ‡∏°‡∏•‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á', benefits: ['‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡∏≠‡πà‡∏≠‡∏ô', '‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡πÅ‡∏õ‡πâ‡∏á', '‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÅ‡∏°‡∏•‡∏á‡∏´‡∏ß‡∏µ‡πà‡∏Ç‡∏≤‡∏ß', '‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡πÑ‡∏ü'], tips: '‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏î‡∏µ ‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô', storage: '‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏¢‡πá‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡πâ‡∏á ‡∏≠‡∏≤‡∏¢‡∏∏ 3-6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' },
  metarhizium: { name: '‡πÄ‡∏°‡∏ï‡∏≤‡πÑ‡∏£‡πÄ‡∏ã‡∏µ‡∏¢‡∏°', icon: 'ü™≤', color: 'meta', fullName: 'Metarhizium anisopliae', ratio: '50 ‡∏Å‡∏£‡∏±‡∏° : ‡∏ô‡πâ‡∏≥ 20 ‡∏•‡∏¥‡∏ï‡∏£', when: '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡πÅ‡∏°‡∏•‡∏á ‡∏â‡∏µ‡∏î‡∏ó‡∏∏‡∏Å 5-7 ‡∏ß‡∏±‡∏ô', how: '‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏î‡∏î‡∏¥‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏ó‡∏µ‡πà‡πÅ‡∏°‡∏•‡∏á‡∏≠‡∏¢‡∏π‡πà', benefits: ['‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏î‡πâ‡∏ß‡∏á‡∏´‡∏°‡∏±‡∏î‡∏ú‡∏±‡∏Å', '‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÑ‡∏£‡πÅ‡∏î‡∏á', '‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏´‡∏ô‡∏≠‡∏ô‡∏Å‡∏≠', '‡∏Å‡∏≥‡∏à‡∏±‡∏î‡πÅ‡∏°‡∏•‡∏á‡∏õ‡∏µ‡∏Å‡πÅ‡∏Ç‡πá‡∏á'], tips: '‡∏£‡∏≤‡∏î‡∏î‡∏¥‡∏ô‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏´‡∏ô‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡∏•‡∏á‡πÉ‡∏ô‡∏î‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ', storage: '‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏¢‡πá‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡πâ‡∏á ‡∏≠‡∏≤‡∏¢‡∏∏ 3-6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' },
  hormone: { name: '‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏û‡∏∑‡∏ä', icon: 'üåø', color: 'hormone', fullName: '‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏ú‡∏•‡πÑ‡∏°‡πâ/‡∏¢‡∏≠‡∏î‡∏û‡∏∑‡∏ä', ratio: '4-5 ‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞ : ‡∏ô‡πâ‡∏≥ 10 ‡∏•‡∏¥‡∏ï‡∏£', when: '‡∏ó‡∏∏‡∏Å 7-10 ‡∏ß‡∏±‡∏ô ‡∏´‡∏•‡∏±‡∏á‡∏¢‡πâ‡∏≤‡∏¢‡∏õ‡∏•‡∏π‡∏Å', how: '‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ó‡∏±‡πà‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ä‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏¢‡πá‡∏ô', benefits: ['‡πÄ‡∏£‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï', '‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏±‡∏Å‡∏≠‡∏ß‡∏ö ‡∏´‡∏ß‡∏≤‡∏ô‡∏Å‡∏£‡∏≠‡∏ö', '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï', '‡πÉ‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏ß‡∏¢'], tips: '‡∏ó‡∏≥‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ: ‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠+‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á+‡∏Å‡∏•‡πâ‡∏ß‡∏¢+EM+‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• ‡∏´‡∏°‡∏±‡∏Å 7-8 ‡∏ß‡∏±‡∏ô', storage: '‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏Ç‡∏ß‡∏î‡∏õ‡∏¥‡∏î‡∏™‡∏ô‡∏¥‡∏ó ‡∏≠‡∏≤‡∏¢‡∏∏ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' }
};

// ===== STATE =====
let plan = null;
let completedTasks = {};
let dailyLogs = {};
let growthLogs = [];
let notes = '';

// ===== HELPERS =====
const $ = id => document.getElementById(id);
const addDays = (date, days) => { const r = new Date(date); r.setDate(r.getDate() + days); return r; };
const formatDate = date => date.toLocaleDateString('th-TH', { day: 'numeric', month: 'short' });
const formatDateFull = date => date.toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
const getDaysDiff = (d1, d2) => Math.floor((d1 - d2) / (1000 * 60 * 60 * 24));
const today = new Date(); today.setHours(0,0,0,0);
const todayKey = today.toISOString().split('T')[0];

// ===== TAB FUNCTIONS =====
function showTab(tabId) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  $(tabId).classList.add('active');
  event.target.classList.add('active');
  if (tabId === 'today') renderToday();
  if (tabId === 'progress') renderProgress();
  if (tabId === 'record') renderRecord();
  if (tabId === 'guide') renderGuide();
}

// ===== PLANNER =====
function updateVeggieOptions() {
  const cat = $('category').value;
  const sel = $('veggieType');
  sel.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...</option>';
  const data = cat === 'salad' ? saladVeggies : cat === 'thai' ? thaiVeggies : {};
  Object.entries(data).forEach(([k, v]) => {
    sel.innerHTML += `<option value="${k}">${v.icon} ${v.name}</option>`;
  });
  $('veggieInfoCard').classList.add('hidden');
}

function showVeggieInfo() {
  const cat = $('category').value;
  const type = $('veggieType').value;
  if (!type) { $('veggieInfoCard').classList.add('hidden'); return; }
  const data = cat === 'salad' ? saladVeggies : thaiVeggies;
  const v = data[type];
  $('vInfoIcon').textContent = v.icon;
  $('vInfoName').textContent = v.name;
  $('vInfoDesc').textContent = v.desc;
  $('vInfoGrid').innerHTML = `
    <div class="veggie-stat">‚è±Ô∏è ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤: ${v.days} ‡∏ß‡∏±‡∏ô</div>
    <div class="veggie-stat">üå± ‡∏á‡∏≠‡∏Å: ${v.germDays} ‡∏ß‡∏±‡∏ô</div>
    <div class="veggie-stat">üíß ‡∏ô‡πâ‡∏≥: ${v.water}</div>
    <div class="veggie-stat">‚òÄÔ∏è ‡πÅ‡∏™‡∏á: ${v.light}</div>
  `;
  $('vInfoTip').innerHTML = `üí° ${v.tips}`;
  $('veggieInfoCard').classList.remove('hidden');
}

function generatePlan() {
  const cat = $('category').value;
  const type = $('veggieType').value;
  const startDateStr = $('startDate').value;
  if (!cat || !type || !startDateStr) { alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏±‡∏Å ‡∏ä‡∏ô‡∏¥‡∏î‡∏ú‡∏±‡∏Å ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å'); return; }
  
  const data = cat === 'salad' ? saladVeggies : thaiVeggies;
  const veggie = data[type];
  const start = new Date(startDateStr);
  
  const phases = [
    { id: 'prep', day: -7, name: 'üîß ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏î‡∏¥‡∏ô', desc: '‡∏û‡∏£‡∏ß‡∏ô‡∏î‡∏¥‡∏ô ‡∏ú‡∏™‡∏°‡∏õ‡∏∏‡πã‡∏¢‡∏Ñ‡∏≠‡∏Å ‡∏£‡∏≤‡∏î EM ‡∏´‡∏°‡∏±‡∏Å 7 ‡∏ß‡∏±‡∏ô', bio: ['em', 'tricho'], tasks: ['‡∏û‡∏£‡∏ß‡∏ô‡∏î‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏£‡πà‡∏ß‡∏ô‡∏ã‡∏∏‡∏¢ ‡∏•‡∏∂‡∏Å 15-20 ‡∏ã‡∏°.', '‡∏ú‡∏™‡∏°‡∏î‡∏¥‡∏ô:‡∏õ‡∏∏‡πã‡∏¢‡∏Ñ‡∏≠‡∏Å:‡∏Ç‡∏∏‡∏¢‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß = 2:1:1', '‡∏£‡∏≤‡∏î EM 1 ‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞:‡∏ô‡πâ‡∏≥ 10 ‡∏•‡∏¥‡∏ï‡∏£', '‡πÇ‡∏£‡∏¢‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏ú‡∏™‡∏°‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å', '‡∏Ñ‡∏•‡∏∏‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ü‡∏≤‡∏á', '‡∏£‡∏≠‡∏´‡∏°‡∏±‡∏Å 7 ‡∏ß‡∏±‡∏ô'] },
    { id: 'plant', day: 0, name: 'üå± ‡∏ß‡∏±‡∏ô‡∏õ‡∏•‡∏π‡∏Å', desc: '‡∏Ñ‡∏•‡∏∏‡∏Å‡πÄ‡∏°‡∏•‡πá‡∏î‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤ ‡∏´‡∏¢‡∏≠‡∏î‡πÄ‡∏°‡∏•‡πá‡∏î', bio: ['tricho'], tasks: ['‡∏Ñ‡∏•‡∏∏‡∏Å‡πÄ‡∏°‡∏•‡πá‡∏î‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤', '‡∏´‡∏¢‡∏≠‡∏î‡πÄ‡∏°‡∏•‡πá‡∏î‡∏•‡∏∂‡∏Å 0.5-1 ‡∏ã‡∏°.', '‡∏Å‡∏•‡∏ö‡∏î‡∏¥‡∏ô‡∏ö‡∏≤‡∏á‡πÜ', '‡∏£‡∏î‡∏ô‡πâ‡∏≥‡∏û‡∏≠‡∏ä‡∏∏‡πà‡∏°', '‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πà‡∏°', '‡∏ï‡∏¥‡∏î‡∏õ‡πâ‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏±‡∏Å'] },
    { id: 'germ', day: veggie.germDays, name: 'üåø ‡πÄ‡∏°‡∏•‡πá‡∏î‡∏á‡∏≠‡∏Å', desc: '‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏ú‡∏•‡πà ‡∏¢‡πâ‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á', bio: ['em'], tasks: ['‡∏ï‡∏£‡∏ß‡∏à‡∏î‡∏π‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏á‡∏≠‡∏Å', '‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏á‡∏≠‡∏Å', '‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏™‡∏á‡∏£‡∏≥‡πÑ‡∏£', '‡∏£‡∏î‡∏ô‡πâ‡∏≥‡∏ú‡∏™‡∏° EM', '‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å üì∏'] },
    { id: 'care1', day: 7, name: 'üíß ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 1', desc: '‡∏£‡∏î EM ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡∏â‡∏µ‡∏î‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ', bio: ['em', 'tricho'], tasks: ['‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÄ‡∏ä‡πâ‡∏≤-‡πÄ‡∏¢‡πá‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô', '‡∏£‡∏î EM 1:1000', '‡∏â‡∏µ‡∏î‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô', '‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤', '‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≤‡πÅ‡∏°‡∏•‡∏á'] },
    { id: 'hormone1', day: 10, name: 'üåø ‡πÉ‡∏´‡πâ‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å', desc: '‡∏â‡∏µ‡∏î‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏£‡πà‡∏á‡πÉ‡∏ö', bio: ['hormone'], tasks: ['‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏û‡∏∑‡∏ä', '‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ó‡∏±‡πà‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á', '‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö'] },
    { id: 'transplant', day: 14, name: 'ü™¥ ‡∏¢‡πâ‡∏≤‡∏¢‡∏õ‡∏•‡∏π‡∏Å', desc: '‡∏¢‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡∏•‡∏á‡πÅ‡∏õ‡∏•‡∏á', bio: ['tricho'], tasks: ['‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏´‡∏•‡∏∏‡∏°‡∏õ‡∏•‡∏π‡∏Å', '‡πÉ‡∏™‡πà‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏£‡∏≠‡∏á‡∏Å‡πâ‡∏ô‡∏´‡∏•‡∏∏‡∏°', '‡∏¢‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤ ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ 15-20 ‡∏ã‡∏°.', '‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏∏‡πà‡∏°', '‡∏û‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏á‡∏ñ‡πâ‡∏≤‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î'] },
    { id: 'pest', day: 17, name: 'ü¶ü ‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏°‡∏•‡∏á', desc: '‡∏ï‡∏£‡∏ß‡∏à‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä ‡∏â‡∏µ‡∏î‡∏ä‡∏µ‡∏ß‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ñ‡πâ‡∏≤‡∏û‡∏ö', bio: ['beauveria', 'metarhizium'], tasks: ['‡∏ï‡∏£‡∏ß‡∏à‡πÉ‡∏ï‡πâ‡πÉ‡∏ö‡∏´‡∏≤‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢', '‡∏ï‡∏£‡∏ß‡∏à‡∏´‡∏≤‡∏´‡∏ô‡∏≠‡∏ô ‡∏£‡∏≠‡∏¢‡∏Å‡∏±‡∏î‡πÅ‡∏ó‡∏∞', '‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢ ‚Üí ‡∏â‡∏µ‡∏î‡∏ö‡∏¥‡∏ß‡πÄ‡∏ß‡∏≠‡πÄ‡∏£‡∏µ‡∏¢', '‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏î‡πâ‡∏ß‡∏á/‡∏´‡∏ô‡∏≠‡∏ô ‚Üí ‡∏â‡∏µ‡∏î‡πÄ‡∏°‡∏ï‡∏≤‡πÑ‡∏£‡πÄ‡∏ã‡∏µ‡∏¢‡∏°'] },
    { id: 'care2', day: 21, name: 'üíß ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 3', desc: '‡∏£‡∏î EM + ‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2', bio: ['em', 'tricho'], tasks: ['‡∏£‡∏î EM ‡∏ó‡∏∏‡∏Å 5-7 ‡∏ß‡∏±‡∏ô', '‡∏â‡∏µ‡∏î‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤', '‡∏û‡∏£‡∏ß‡∏ô‡∏î‡∏¥‡∏ô‡πÄ‡∏ö‡∏≤‡πÜ', '‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏ß‡∏±‡∏ä‡∏û‡∏∑‡∏ä', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á'] },
    { id: 'hormone2', day: 25, name: 'üåø ‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏£‡∏≠‡∏ö 2', desc: '‡∏â‡∏µ‡∏î‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô ‡∏û‡∏£‡∏ß‡∏ô‡∏î‡∏¥‡∏ô', bio: ['hormone'], tasks: ['‡∏â‡∏µ‡∏î‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏û‡∏∑‡∏ä', '‡∏û‡∏£‡∏ß‡∏ô‡∏î‡∏¥‡∏ô‡πÄ‡∏ö‡∏≤‡πÜ', '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏£‡∏Ñ‡∏û‡∏∑‡∏ä', '‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤'] },
    { id: 'grow', day: Math.floor(veggie.days * 0.8), name: 'ü•¨ ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß', desc: '‡∏ï‡πâ‡∏ô‡πÇ‡∏ï‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà ‡∏î‡∏π‡πÅ‡∏•‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á', bio: ['tricho'], tasks: ['‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä', '‡∏£‡∏î EM ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢', '‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ï‡πâ‡∏ô‡πÇ‡∏ï‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà', '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß'] },
    { id: 'stop', day: veggie.days - 5, name: '‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏ä‡∏µ‡∏ß‡∏†‡∏±‡∏ì‡∏ë‡πå', desc: '‡∏´‡∏¢‡∏∏‡∏î‡∏â‡∏µ‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö 3-5 ‡∏ß‡∏±‡∏ô', bio: [], tasks: ['‡∏´‡∏¢‡∏∏‡∏î‡∏â‡∏µ‡∏î‡∏™‡∏≤‡∏£‡∏ä‡∏µ‡∏ß‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤/‡∏ñ‡∏∏‡∏á', '‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß'] },
    { id: 'harvest', day: veggie.days, name: 'üéâ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß!', desc: '‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏±‡∏Å‡∏™‡∏î ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≤‡∏ô!', bio: [], tasks: ['‡∏£‡∏î‡∏ô‡πâ‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡∏ä‡∏∏‡πà‡∏°', '‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏±‡∏Å‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤', '‡∏ï‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô', '‡∏•‡πâ‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏™‡∏∞‡∏≠‡∏≤‡∏î', '‡∏ä‡∏±‡πà‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï', '‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! üì∏üéä'] }
  ];
  
  plan = {
    veggie,
    startDate: start,
    phases: phases.map(p => ({ ...p, date: addDays(start, p.day) }))
  };
  completedTasks = {};
  growthLogs = [];
  
  // Show summary
  $('planIcon').textContent = veggie.icon;
  $('planTitle').textContent = veggie.name;
  $('planDates').innerHTML = `‡πÄ‡∏£‡∏¥‡πà‡∏° ${formatDateFull(start)}<br>‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß ${formatDateFull(addDays(start, veggie.days))}`;
  updatePlanProgress();
  $('planSummaryCard').classList.remove('hidden');
  
  showTab('today');
  document.querySelector('.tab:nth-child(2)').classList.add('active');
  document.querySelector('.tab:nth-child(1)').classList.remove('active');
}

function updatePlanProgress() {
  if (!plan) return;
  const total = plan.veggie.days + 7;
  const passed = getDaysDiff(today, addDays(plan.startDate, -7));
  const pct = Math.min(100, Math.max(0, Math.round((passed / total) * 100)));
  $('planProgressBar').style.width = pct + '%';
  $('planProgressText').textContent = pct + '%';
}

function getCurrentPhase() {
  if (!plan) return null;
  const sorted = [...plan.phases].sort((a, b) => b.date - a.date);
  return sorted.find(p => p.date <= today) || plan.phases[0];
}

function getNextPhase() {
  if (!plan) return null;
  return plan.phases.find(p => p.date > today);
}

function getPhaseCompletion(phase) {
  const done = phase.tasks.filter((_, i) => completedTasks[`${phase.id}-${i}`]).length;
  return Math.round((done / phase.tasks.length) * 100);
}

function toggleTask(phaseId, taskIdx) {
  const key = `${phaseId}-${taskIdx}`;
  completedTasks[key] = !completedTasks[key];
  renderToday();
  renderProgress();
}

function logDaily(type) {
  if (!dailyLogs[todayKey]) dailyLogs[todayKey] = {};
  dailyLogs[todayKey][type] = new Date().toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' });
  renderToday();
}

// ===== RENDER TODAY =====
function renderToday() {
  if (!plan) {
    $('todayContent').innerHTML = `<div class="empty-state"><div class="icon">üå±</div><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</p><button class="btn btn-sm" onclick="showTab('planner')">üëâ ‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô</button></div>`;
    return;
  }
  
  const current = getCurrentPhase();
  const next = getNextPhase();
  const dayNum = getDaysDiff(today, plan.startDate) + 1;
  const daysLeft = Math.max(0, getDaysDiff(addDays(plan.startDate, plan.veggie.days), today));
  const pct = Math.min(100, Math.max(0, Math.round((getDaysDiff(today, addDays(plan.startDate, -7)) / (plan.veggie.days + 7)) * 100)));
  const todayLog = dailyLogs[todayKey] || {};
  
  let html = `
    <div class="status-card">
      <h2>üìÖ ${formatDateFull(today)}</h2>
      <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${dayNum} ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å ${plan.veggie.name} ${plan.veggie.icon}</p>
      <div class="status-badges">
        <span class="status-badge">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å ${daysLeft} ‡∏ß‡∏±‡∏ô</span>
        <span class="status-badge">${pct}% ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</span>
      </div>
    </div>
  `;
  
  if (current) {
    const completion = getPhaseCompletion(current);
    html += `
      <div class="card phase-card">
        <div class="phase-header">
          <span class="phase-title">${current.name}</span>
          <span class="phase-badge">üéØ ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</span>
        </div>
        <p class="phase-desc">${current.desc}</p>
        ${current.bio.length > 0 ? `
          <div class="bio-tags">
            <span style="font-size:0.7em;color:#888;margin-right:4px;">‡πÉ‡∏ä‡πâ:</span>
            ${current.bio.map(b => `<span class="bio-tag bio-${bioProducts[b].color}" onclick="showBioPopup('${b}')">${bioProducts[b].icon} ${bioProducts[b].name}</span>`).join('')}
          </div>
        ` : ''}
        <div id="bioPopup"></div>
        <p style="font-size:0.8em;font-weight:600;color:#555;margin-bottom:8px;">üìù ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ (${current.tasks.filter((_, i) => completedTasks[`${current.id}-${i}`]).length}/${current.tasks.length}):</p>
        <ul class="checklist">
          ${current.tasks.map((t, i) => `
            <li class="${completedTasks[`${current.id}-${i}`] ? 'done' : ''}" onclick="toggleTask('${current.id}', ${i})">
              <input type="checkbox" ${completedTasks[`${current.id}-${i}`] ? 'checked' : ''}>
              <span>${t}</span>
            </li>
          `).join('')}
        </ul>
        <div class="progress-wrap"><div class="progress-bar" style="width:${completion}%"></div></div>
        <div class="progress-text"><span>‡∏ó‡∏≥‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß</span><span>${completion}%</span></div>
      </div>
    `;
  }
  
  html += `
    <div class="card">
      <h2>‚ö° ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏î‡πà‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
      <div class="quick-btns">
        ${[
          { id: 'water_am', icon: 'üíß', label: '‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÄ‡∏ä‡πâ‡∏≤' },
          { id: 'water_pm', icon: 'üíß', label: '‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡πá‡∏ô' },
          { id: 'check', icon: 'üîç', label: '‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ' },
          { id: 'em', icon: 'ü¶†', label: '‡πÉ‡∏´‡πâ EM' },
          { id: 'tricho', icon: 'üçÑ', label: '‡∏â‡∏µ‡∏î‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ' },
          { id: 'photo', icon: 'üì∏', label: '‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ' }
        ].map(item => `
          <button class="quick-btn ${todayLog[item.id] ? 'done' : ''}" onclick="logDaily('${item.id}')">
            <span class="icon">${item.icon}</span>
            <span class="label">${item.label}</span>
            ${todayLog[item.id] ? `<span class="time">‚úì ${todayLog[item.id]}</span>` : ''}
          </button>
        `).join('')}
      </div>
    </div>
  `;
  
  if (next) {
    html += `
      <div class="card next-phase">
        <h3>‚è≠Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</h3>
        <p style="font-size:0.85em;color:#333;">${next.name}</p>
        <p style="font-size:0.75em;color:#1565c0;">üìÖ ${formatDate(next.date)} (‡∏≠‡∏µ‡∏Å ${getDaysDiff(next.date, today)} ‡∏ß‡∏±‡∏ô)</p>
        ${next.bio.length > 0 ? `
          <div class="bio-tags" style="margin-top:8px;">
            <span style="font-size:0.65em;color:#888;">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°:</span>
            ${next.bio.map(b => `<span class="bio-tag bio-${bioProducts[b].color}">${bioProducts[b].icon} ${bioProducts[b].name}</span>`).join('')}
          </div>
        ` : ''}
      </div>
    `;
  }
  
  html += `
    <div class="tips">
      <h3>üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
      <ul>
        <li><span>üíß</span> ‡∏£‡∏î‡∏ô‡πâ‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏∏‡πà‡∏°‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏â‡∏∞‡∏à‡∏ô‡∏ô‡πâ‡∏≥‡∏Ç‡∏±‡∏á</li>
        <li><span>üîç</span> ‡∏ï‡∏£‡∏ß‡∏à‡πÉ‡∏ï‡πâ‡πÉ‡∏ö‡∏´‡∏≤‡πÅ‡∏°‡∏•‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</li>
        ${current?.bio.includes('em') ? '<li><span>ü¶†</span> ‡∏ú‡∏™‡∏° EM ‡∏£‡∏î‡∏ô‡πâ‡∏≥ (1 ‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞:‡∏ô‡πâ‡∏≥ 10 ‡∏•‡∏¥‡∏ï‡∏£)</li>' : ''}
        ${current?.bio.includes('tricho') ? '<li><span>üçÑ</span> ‡∏â‡∏µ‡∏î‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏¢‡πá‡∏ô</li>' : ''}
        ${current?.bio.includes('hormone') ? '<li><span>üåø</span> ‡∏â‡∏µ‡∏î‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏û‡∏∑‡∏ä‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡πà‡∏á‡πÉ‡∏ö</li>' : ''}
      </ul>
    </div>
  `;
  
  html += `
    <div class="card">
      <h2>üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
      <textarea placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ..." style="height:70px;" onchange="notes=this.value">${notes}</textarea>
    </div>
  `;
  
  $('todayContent').innerHTML = html;
}

function showBioPopup(bioKey) {
  const bio = bioProducts[bioKey];
  const popup = $('bioPopup');
  if (popup.innerHTML.includes(bio.name)) {
    popup.innerHTML = '';
    return;
  }
  popup.innerHTML = `
    <div class="bio-detail bio-${bio.color}" style="border:2px solid;">
      <h4>${bio.icon} ${bio.name} <span class="close" onclick="$('bioPopup').innerHTML=''">‚úï</span></h4>
      <p><b>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô:</b> ${bio.ratio}</p>
      <p><b>‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ:</b> ${bio.how}</p>
    </div>
  `;
}

// ===== RENDER PROGRESS =====
function renderProgress() {
  if (!plan) {
    $('progressContent').innerHTML = `<div class="empty-state"><div class="icon">üå±</div><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</p><button class="btn btn-sm" onclick="showTab('planner')">üëâ ‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô</button></div>`;
    return;
  }
  
  const dayNum = Math.max(1, getDaysDiff(today, plan.startDate) + 1);
  const daysLeft = Math.max(0, getDaysDiff(addDays(plan.startDate, plan.veggie.days), today));
  const pct = Math.min(100, Math.max(0, Math.round((getDaysDiff(today, addDays(plan.startDate, -7)) / (plan.veggie.days + 7)) * 100)));
  const tasksDone = Object.values(completedTasks).filter(Boolean).length;
  const current = getCurrentPhase();
  
  let html = `
    <div class="card">
      <h2>üìà ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô</h2>
      <div class="stats-grid">
        <div class="stat-box green"><div class="stat-value">${dayNum}</div><div class="stat-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏π‡∏Å</div></div>
        <div class="stat-box blue"><div class="stat-value">${tasksDone}</div><div class="stat-label">‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à</div></div>
        <div class="stat-box purple"><div class="stat-value">${daysLeft}</div><div class="stat-label">‡∏ß‡∏±‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div></div>
        <div class="stat-box orange"><div class="stat-value">${pct}%</div><div class="stat-label">‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</div></div>
      </div>
    </div>
    
    <div class="card">
      <h2>üìä ‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏•‡∏ô‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</h2>
      ${plan.phases.map((phase, idx) => {
        const isPast = phase.date < today;
        const isCurrent = current?.id === phase.id;
        const completion = getPhaseCompletion(phase);
        return `
          <div class="timeline-item">
            <div class="timeline-dot ${isCurrent ? 'current' : isPast ? 'done' : 'future'}">${isPast && completion === 100 ? '‚úì' : idx + 1}</div>
            <div class="timeline-content ${isCurrent ? 'current' : isPast ? 'done' : 'future'}">
              <span class="timeline-title">${phase.name}</span>
              ${(isPast || isCurrent) ? `<span class="timeline-percent ${completion === 100 ? 'complete' : 'partial'}">${completion}%</span>` : ''}
              <div class="timeline-date">${formatDate(phase.date)}</div>
              ${isCurrent ? '<div style="font-size:0.7em;color:#f9a825;margin-top:4px;">üëà ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏≠‡∏¢‡∏π‡πà</div>' : ''}
            </div>
          </div>
        `;
      }).join('')}
    </div>
  `;
  
  if (growthLogs.length > 0) {
    html += `
      <div class="card">
        <h2>üìè ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï</h2>
        ${growthLogs.slice().reverse().map(log => `
          <div class="growth-item">
            <div class="growth-header">
              <span class="growth-day">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${log.day}</span>
              <span class="growth-date">${formatDate(new Date(log.date))}</span>
            </div>
            <div class="growth-tags">
              ${log.height ? `<span class="growth-tag height">üìè ‡∏™‡∏π‡∏á ${log.height} ‡∏ã‡∏°.</span>` : ''}
              ${log.leaves ? `<span class="growth-tag leaves">üçÉ ${log.leaves} ‡πÉ‡∏ö</span>` : ''}
              ${log.problem ? `<span class="growth-tag problem">‚ö†Ô∏è ${log.problem}</span>` : ''}
            </div>
          </div>
        `).join('')}
      </div>
    `;
  }
  
  $('progressContent').innerHTML = html;
}

// ===== RENDER RECORD =====
function renderRecord() {
  if (!plan) {
    $('recordContent').innerHTML = `<div class="empty-state"><div class="icon">üå±</div><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</p><button class="btn btn-sm" onclick="showTab('planner')">üëâ ‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡∏ô</button></div>`;
    return;
  }
  
  const dayNum = getDaysDiff(today, plan.startDate) + 1;
  
  let html = `
    <div class="card">
      <h2>üìè ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï</h2>
      <p style="font-size:0.75em;color:#888;margin-bottom:10px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${dayNum} ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</p>
      <div class="form-row">
        <div class="form-group">
          <label>üìè ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (‡∏ã‡∏°.)</label>
          <input type="number" id="newHeight" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5">
        </div>
        <div class="form-group">
          <label>üçÉ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö</label>
          <input type="number" id="newLeaves" placeholder="‡πÄ‡∏ä‡πà‡∏ô 4">
        </div>
      </div>
      <div class="form-group">
        <label>‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
        <input type="text" id="problemLog" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ö‡πÄ‡∏û‡∏•‡∏µ‡πâ‡∏¢‡πÉ‡∏ï‡πâ‡πÉ‡∏ö">
      </div>
      <button class="btn" onclick="addGrowthLog()">‚ûï ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>
    
    <div class="card">
      <h2>üìä ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (${growthLogs.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</h2>
      ${growthLogs.length === 0 ? '<p style="text-align:center;color:#999;padding:20px;font-size:0.85em;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>' : 
        growthLogs.slice().reverse().map(log => `
          <div class="growth-item">
            <div class="growth-header">
              <span class="growth-day">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${log.day}</span>
              <span class="growth-date">${formatDate(new Date(log.date))}</span>
            </div>
            <div class="growth-tags">
              ${log.height ? `<span class="growth-tag height">üìè ‡∏™‡∏π‡∏á ${log.height} ‡∏ã‡∏°.</span>` : ''}
              ${log.leaves ? `<span class="growth-tag leaves">üçÉ ${log.leaves} ‡πÉ‡∏ö</span>` : ''}
              ${log.problem ? `<span class="growth-tag problem">‚ö†Ô∏è ${log.problem}</span>` : ''}
            </div>
          </div>
        `).join('')
      }
    </div>
    
    <div class="card">
      <h2>üìã ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h2>
      ${Object.keys(dailyLogs).length === 0 ? '<p style="text-align:center;color:#999;padding:20px;font-size:0.85em;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>' :
        Object.entries(dailyLogs).slice().reverse().slice(0, 7).map(([date, logs]) => `
          <div class="activity-day">
            <div class="date">${new Date(date).toLocaleDateString('th-TH', { weekday: 'short', day: 'numeric', month: 'short' })}</div>
            <div class="activity-tags">
              ${logs.water_am ? `<span class="activity-tag" style="background:#e3f2fd;color:#1565c0;">üíß‡πÄ‡∏ä‡πâ‡∏≤ ${logs.water_am}</span>` : ''}
              ${logs.water_pm ? `<span class="activity-tag" style="background:#e3f2fd;color:#1565c0;">üíß‡πÄ‡∏¢‡πá‡∏ô ${logs.water_pm}</span>` : ''}
              ${logs.em ? `<span class="activity-tag" style="background:#fff3e0;color:#e65100;">ü¶†EM ${logs.em}</span>` : ''}
              ${logs.tricho ? `<span class="activity-tag" style="background:#e8f5e9;color:#2e7d32;">üçÑ‡πÑ‡∏ï‡∏£‡πÇ‡∏Ñ ${logs.tricho}</span>` : ''}
              ${logs.check ? `<span class="activity-tag" style="background:#fffde7;color:#f9a825;">üîç‡∏ï‡∏£‡∏ß‡∏à ${logs.check}</span>` : ''}
              ${logs.photo ? `<span class="activity-tag" style="background:#f3e5f5;color:#7b1fa2;">üì∏ ${logs.photo}</span>` : ''}
            </div>
          </div>
        `).join('')
      }
    </div>
  `;
  
  $('recordContent').innerHTML = html;
}

function addGrowthLog() {
  const height = $('newHeight').value;
  const leaves = $('newLeaves').value;
  const problem = $('problemLog').value;
  if (!height && !leaves) { alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö'); return; }
  
  growthLogs.push({
    date: new Date(),
    day: getDaysDiff(today, plan.startDate) + 1,
    height,
    leaves,
    problem
  });
  
  $('newHeight').value = '';
  $('newLeaves').value = '';
  $('problemLog').value = '';
  renderRecord();
  renderProgress();
}

// ===== RENDER GUIDE =====
function renderGuide() {
  let html = '';
  Object.entries(bioProducts).forEach(([key, bio]) => {
    html += `
      <div class="bio-accordion bio-${bio.color}" onclick="this.classList.toggle('open')" style="border-color: currentColor;">
        <div class="bio-accordion-header">
          <div class="info">
            <span class="icon">${bio.icon}</span>
            <div>
              <div class="name">${bio.name}</div>
              <div class="fullname">${bio.fullName}</div>
            </div>
          </div>
          <span class="arrow">‚ñº</span>
        </div>
        <div class="bio-accordion-body" onclick="event.stopPropagation()">
          <div class="bio-info-box"><b>üìè ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô:</b> ${bio.ratio}</div>
          <div class="bio-info-box"><b>‚è∞ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà:</b> ${bio.when}</div>
          <div class="bio-info-box"><b>üìù ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ:</b> ${bio.how}</div>
          <div class="bio-info-box"><b>‚úÖ ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:</b><ul>${bio.benefits.map(b => `<li>${b}</li>`).join('')}</ul></div>
          <div class="bio-info-box"><b>üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:</b> ${bio.tips}</div>
          <div class="bio-info-box"><b>üì¶ ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤:</b> ${bio.storage}</div>
        </div>
      </div>
    `;
  });
  $('bioGuideContent').innerHTML = html;
}

// ===== INIT =====
document.addEventListener('DOMContentLoaded', () => {
  $('startDate').valueAsDate = new Date();
  renderGuide();
});
</script>
</body>
</html>
